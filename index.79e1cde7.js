const e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],t=new class{constructor(e){this.initialState=e,console.log(e)}moveLeft(){}moveRight(){}moveUp(){}moveDown(){}getScore(){}getState(){}getStatus(){}start(){}restart(){}}(e);let o=0;const l=document.querySelector(".game-score");let n=structuredClone(e);const r=document.querySelectorAll(".field-cell"),s=document.querySelector(".button"),a=document.querySelector(".message-start"),c=document.querySelector(".message-win"),h=document.querySelector(".message-lose");function m(){let e=Math.round(3*Math.random()),s=Math.round(3*Math.random()),a=.1>Math.random()?4:2;for(;n[e][s]>0&&o<r.length;)e=Math.round(3*Math.random()),s=Math.round(3*Math.random());n[e][s]=a,o++,l.textContent=t.getScore(),function(){for(let e=0;e<r.length;e++)r[e].textContent=0===n[Math.floor(e/4)][e%4]?"":n[Math.floor(e/4)][e%4],r[e].className=0===n[Math.floor(e/4)][e%4]?"field-cell":`field-cell field-cell--${n[Math.floor(e/4)][e%4]}`}()}s.addEventListener("click",()=>{"button restart"===s.className&&t.restart(),"button start"===s.className&&t.start()}),document.addEventListener("keydown",e=>{switch(e.keyCode){case 37:t.moveLeft();break;case 38:t.moveUp();break;case 39:t.moveRight();break;case 40:t.moveDown()}[...r].some(e=>"2048"===e.textContent)&&(c.className="message message-win"),o===r.length&&!function(){let e=!1;for(let t=n.length-2;t>=0;t--)for(let o=0;o<n[t].length;o++)n[t+1][o]===n[t][o]&&0!==n[t][o]&&(e=!0);for(let t=n.length-1;t>0;t--)for(let o=0;o<n[t].length;o++)n[t-1][o]===n[t][o]&&0!==n[t][o]&&(e=!0);for(let t=0;t<n.length;t++)for(let o=1;o<n[t].length;o++)n[t][o-1]===n[t][o]&&0!==n[t][o]&&(e=!0);for(let t=0;t<n.length;t++)for(let o=n[t].length-2;o>=0;o--)n[t][o+1]===n[t][o]&&0!==n[t][o]&&(e=!0);return e}()&&(h.className="message message-lose")}),t.start=()=>{a.className="message message-start hidden",h.className="message message-lose hidden",c.className="message message-win hidden",s.className="button restart",s.textContent="Restart",m(),m()},t.restart=()=>{o=0,l.textContent=0,n=structuredClone(e),t.start()},t.getScore=()=>{let e=0;for(let t of n)e+=t.reduce((e,t)=>e+t);return e},t.moveDown=()=>{let e=!1,t=[];for(let l=0;l<n.length;l++)for(let l=n.length-2;l>=0;l--)for(let r=0;r<n[l].length;r++){if(n[l+1][r]===n[l][r]&&0!==n[l][r]&&t.every(e=>e!==r)){if(0!==n[0][r]&&0!==n[3][r]&&n[0][r]===n[1][r]&&n[2][r]===n[3][r]){n[3][r]=2*n[2][r],n[2][r]=2*n[1][r],n[1][r]=0,n[0][r]=0,e=!0,t.push(r),o-=2;continue}n[l+1][r]*=2,n[l][r]=0,e=!0,t.push(r),o--}0===n[l+1][r]&&0!==n[l][r]&&([n[l+1][r],n[l][r]]=[n[l][r],n[l+1][r]],e=!0)}e&&m()},t.moveUp=()=>{let e=!1,t=[];for(let l=0;l<n.length;l++)for(let l=n.length-1;l>0;l--)for(let r=0;r<n[l].length;r++){if(n[l-1][r]===n[l][r]&&0!==n[l][r]&&t.every(e=>e!==r)){if(0!==n[0][r]&&0!==n[3][r]&&n[0][r]===n[1][r]&&n[2][r]===n[3][r]){n[0][r]=2*n[1][r],n[1][r]=2*n[2][r],n[2][r]=0,n[3][r]=0,e=!0,t.push(r),o-=2;continue}n[l-1][r]*=2,n[l][r]=0,e=!0,t.push(r),o--}0===n[l-1][r]&&0!==n[l][r]&&([n[l-1][r],n[l][r]]=[n[l][r],n[l-1][r]],e=!0)}e&&m()},t.moveLeft=()=>{let e=!1,t=[];for(let l=0;l<n.length;l++)for(let l=0;l<n.length;l++)for(let r=1;r<n[l].length;r++){if(n[l][r-1]===n[l][r]&&0!==n[l][r]&&t.every(e=>e!==l)){if(0!==n[l][0]&&0!==n[l][3]&&n[l][0]===n[l][1]&&n[l][2]===n[l][3]){n[l][0]=2*n[l][1],n[l][1]=2*n[l][2],n[l][2]=0,n[l][3]=0,e=!0,t.push(l),o-=2;continue}n[l][r-1]*=2,n[l][r]=0,e=!0,t.push(l),o--}0===n[l][r-1]&&0!==n[l][r]&&([n[l][r-1],n[l][r]]=[n[l][r],n[l][r-1]],e=!0)}e&&m()},t.moveRight=()=>{let e=!1,t=[];for(let l=0;l<n.length;l++)for(let l=0;l<n.length;l++)for(let r=n[l].length-2;r>=0;r--){if(n[l][r+1]===n[l][r]&&0!==n[l][r]&&t.every(e=>e!==l)){if(0!==n[l][0]&&0!==n[l][3]&&n[l][0]===n[l][1]&&n[l][2]===n[l][3]){n[l][3]=2*n[l][2],n[l][2]=2*n[l][1],n[l][1]=0,n[l][0]=0,e=!0,t.push(l),o-=2;continue}n[l][r+1]*=2,n[l][r]=0,e=!0,t.push(l),o--}0===n[l][r+1]&&0!==n[l][r]&&([n[l][r+1],n[l][r]]=[n[l][r],n[l][r+1]],e=!0)}e&&m()};
//# sourceMappingURL=index.79e1cde7.js.map
